<% content_for(:title, t('.title')) %>

<div class="p-6 bg-ivory min-h-screen">
  <h2 class="text-xl font-bold text-center text-green-800 mb-6">
    <%= t('.title') %>
  </h2>

  <div class="flex flex-col md:flex-row gap-8 items-start justify-center">
    <!-- 左側：香水情報 -->
    <div class="flex flex-col items-center text-center">
      <p class="text-sm font-semibold"><%= @review.fragrance.brand %></p>
      <p class="text-xl font-bold"><%= @review.fragrance.name %></p>

      <% if @review.fragrance.image.attached? %>
        <%= image_tag @review.fragrance.image.variant(resize_to_limit: [300, 300]), class: "w-48 h-42 object-cover rounded-xl mb-4" %>
      <% else %>
        <%= image_tag "default_fragrance.png", class: "w-48 h-42 object-contain rounded" %>
      <% end %>

      <!-- ユーザー名 -->
      <p class="text-sm text-gray-600 mb-2">
        <i class="fa-solid fa-user mr-1"></i>
        <%= @review.user.name.presence || "匿名" %>
      </p>
    </div>

    <!-- 右側：レビュー本文 -->
    <div class="flex flex-col gap-4 w-full md:w-1/2">
      <div>
        <p class="font-semibold mb-1"><%= t('activerecord.attributes.review.body') %></p>
          <div class="p-2 border rounded-md text-sm text-gray-800 bg-white">
            <%= simple_format(@review.body) %>
          </div>
      </div>
    </div>
  </div>

  <div class="text-center mt-8">
    <% if current_user == @review.user %>
      <%= link_to t('defaults.edit'), edit_review_path(@review), class: "btn btn-outline" %>
      <%= link_to t('defaults.delete'), review_path(@review), method: :delete, data: { confirm: t('defaults.delete_confirm') }, class: "btn btn-error" %>
    <% end %>
    <%= link_to t('defaults.back_index'), reviews_path, class: "text-sm text-gray-500 underline" %>
  </div>
</div>