<div class="w-full max-w-2xl mx-auto px-4">
  <% if user_signed_in? %>
    <div id="comment-form">
      <%= form_with(model: [review, comment], class: "flex flex-col space-y-2") do |f| %>

        <!-- エラーメッセージ表示 -->
        <% if comment.errors.any? %>
          <div class="bg-red-100 border border-red-400 text-red-700 p-2 rounded mb-3">
            <ul class="list-none">
              <% comment.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <div class="bg-gray-100 rounded-lg shadow-sm">
          <%= f.text_area :body,
                placeholder: "コメントを入力してください",
                rows: 2,
                class: "w-full bg-transparent text-sm border-none focus:outline-none px-3 py-2 resize-none" %>
        </div>

        <div class="text-right">
          <%= f.submit "投稿",
                class: "btn btn-primary py-2 px-6 shadow-md transition duration-200 max-w-xs" %>
        </div>
      <% end %>
    </div>

  <!-- 未ログインの場合 -->
  <% else %>
    <div class="text-center mb-4 p-4 border rounded-md text-gray-700">
      <i class="fa-regular fa-user text-gray-400 mb-2"></i>
      <p class="text-gray-600">
        コメントを投稿するには
        <%= link_to "ログイン", new_user_session_path, class: "text-blue-600 hover:underline" %>
        または
        <%= link_to "新規登録", new_user_registration_path, class: "text-blue-600 hover:underline" %>
        が必要です
      </p>
    </div>
  <% end %>
</div>