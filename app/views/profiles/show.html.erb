<% content_for(:title, t('.title')) %>

<section class="px-4 py-12 sm:px-6 lg:px-8">
  <h1 class="text-3xl font-bold mb-6 text-center">
    <i class="fa-solid fa-house-chimney-user"></i>
    <%= t('.title') %>
  </h1>

  <div class="max-w-md w-full mx-auto bg-white p-4 sm:p-6 rounded-xl shadow-lg">
    <!-- ユーザー情報 -->
    <div class="space-y-4">
      <div class="profile-avatar mb-4 flex justify-center">
        <div class="avatar">
          <div class="w-48 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2">
            <% if @user.profile_image.attached? %>
              <%= image_tag @user.profile_image, alt: "プロフィール画像" %>
            <% else %>
              <%= image_tag "default_profile_image.png", alt: "デフォルトプロフィール画像" %>
            <% end %>
          </div>
        </div>
      </div>

      <div>
        <label class="block font-semibold text-gray-700 mb-1">
          <i class="fa-solid fa-user"></i> ユーザー名
        </label>
        <p class="p-3 text-lg text-gray-800">
          <%= @user.name %>
        </p>
      </div>

      <div>
        <label class="block font-semibold text-gray-700 mb-1">
          <i class="fa-solid fa-envelope"></i> メールアドレス
        </label>
        <p class="p-3 text-lg text-gray-800">
          <%= @user.email %>
        </p>
      </div>
    </div>

    <!-- 編集ボタン -->
    <div class="mt-6">
      <%= link_to  edit_profile_path, class: "btn btn-primary w-full" do %>
        <i class="fa-solid fa-pen"></i>
        プロフィールを編集
      <% end %>
    </div>
  </div>

  <!-- お気に入りレビュー -->
  <div class="max-w-4xl w-full mx-auto mt-4">
    <div class="bg-base rounded-xl shadow-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold text-gray-800 flex items-center">
          <i class="fas fa-heart" style="color: #fde484;" mr-2></i>
          お気に入りレビュー
        </h2>
        <% if @recent_favorites.present? %>
          <%= link_to profile_favorites_path, class: "btn btn-outline btn-sm" do %>
            <i class="fa-solid fa-arrow-right"></i>
            すべて見る
          <% end %>
        <% end %>
      </div>

      <% if @recent_favorites.present? %>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          <% @recent_favorites.each do |review| %>
            <%= render 'profiles/favorite_review', review: review %>
          <% end %>
        </div>
      <% else %>
        <div class="text-center py-12">
          <i class="fa-solid fa-heart-crack text-gray-300 text-6xl mb-4"></i>
          <p class="text-gray-500 mb-4">まだお気に入りのレビューがありません</p>
          <%= link_to reviews_path, class: "btn btn-primary" do %>
            <i class="fa-solid fa-search mr-2"></i>
            レビューを探す
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</section>