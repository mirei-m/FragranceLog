<% content_for(:title, @fragrance.name) %>
<h1><%= t('.title') %></h1>

<div class="md:flex md:space-x-6">
  <!-- 左側 -->
  <div class="md:w-1/2">
    <p><%= t('activerecord.attributes.fragrance.brand') %>: <%= @fragrance.brand %></p>
    <h2><%= t('activerecord.attributes.fragrance.name') %>： <%= @fragrance.name %></h2>

    <% if @fragrance.image.attached? %>
      <%= image_tag @fragrance.image.variant(resize_to_limit: [300, 240]), class: "w-[300px] h-[240px] object-cover rounded shadow-md mb-4" %>
    <% else %>
      <%= image_tag "default_fragrance.png", class: "w-[300px] h-[240px] object-cover rounded shadow-md mb-4" %>
    <% end %>

    <p>レビュー公開設定：<%= @fragrance.status_i18n %>
    <% if @fragrance.published? %>
      <i class="fas fa-globe text-blue-500" title="公開中"></i>
    <% else %>
      <i class="fas fa-lock text-gray-400" title="非公開"></i>
    <% end %></p>

    <% if @fragrance.unpublished? %>
      <%= link_to "レビューを書く", new_review_path(fragrance_id: @fragrance.id), class: "btn btn-primary mt-4" %>
    <% elsif @fragrance.published? && (review = @fragrance.review) %>
      <%= link_to "レビューを見る", review_path(review), class: "btn btn-outline" %>
    <% end %>
  </div>

  <!-- 右側（チャート） -->
  <div class="md:w-1/2 mt-6 md:mt-0">
    <div class="p-4 border rounded bg-white shadow">
      <%= render "shared/radar_chart",
        chart_id: "fragrance_chart_#{@fragrance.id}",
        data: [
          @fragrance.sweetness,
          @fragrance.freshness,
          @fragrance.floral,
          @fragrance.sexy,
          @fragrance.spicy,
          @fragrance.calm
        ] %>
    </div>
  </div>
</div>

<div class="mt-4 space-x-2">
  <%= link_to t('defaults.edit'), edit_fragrance_path(@fragrance), class: "btn btn-outline" %>
  <%= link_to t('defaults.delete'), fragrance_path(@fragrance), method: :delete, data: { confirm: t('defaults.delete_confirm') }, class: "btn btn-error" %>
  <%= link_to t('defaults.back_index'), fragrances_path, class: "btn" %>
</div>